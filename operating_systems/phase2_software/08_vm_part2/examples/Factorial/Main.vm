// Test: Recursive factorial - factorial(5) = 120
function Main.main 1
    push constant 5
    call Main.factorial 1
    pop local 0        // local[0] = 120
    push local 0
    return

// Recursive factorial function
function Main.factorial 0
    push argument 0
    push constant 2
    lt
    if-goto FACT_BASE_CASE

    // Recursive case: n * factorial(n-1)
    push argument 0
    push argument 0
    push constant 1
    sub
    call Main.factorial 1
    call Math.multiply 2
    return

label FACT_BASE_CASE
    // Base case: factorial(0) = factorial(1) = 1
    push constant 1
    return
